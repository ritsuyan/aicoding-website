---
// ChatButton.astro
---

<!-- èŠå¤©æŒ‰é’® -->
<button id="chatButton" style="
  position: fixed;
  bottom: 30px;
  right: 30px;
  width: 60px;
  height: 60px;
  border-radius: 50%;
  background: linear-gradient(135deg, #3b82f6, #8b5cf6);
  color: white;
  border: none;
  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 28px;
  z-index: 1000;
  transition: all 0.3s ease;" 
onmouseover="this.style.transform='scale(1.1)'; this.style.boxShadow='0 6px 20px rgba(0, 0, 0, 0.25)'" 
onmouseout="this.style.transform='scale(1)'; this.style.boxShadow='0 4px 15px rgba(0, 0, 0, 0.2)'"
aria-label="æ‰“å¼€èŠå¤©">
  ðŸ’¬
</button>

<!-- èŠå¤©å¼¹çª— -->
<div id="chatModal" style="
  display: none;
  position: fixed;
  bottom: 100px;
  right: 30px;
  width: 380px;
  height: 700px;
  background: white;
  border-radius: 12px;
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
  z-index: 1001;
  overflow: hidden;">
  <iframe
    src="https://udify.app/chatbot/fCO1m1qK714QSbQr"
    style="width: 100%; height: 100%; min-height: 700px"
    frameborder="0"
    allow="microphone">
  </iframe>
</div>

<style>
  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
  }
  @media (max-width: 480px) {
    #chatModal {
      width: 90%;
      height: 80vh;
      right: 5%;
      bottom: 80px;
    }
    #chatButton {
      width: 50px;
      height: 50px;
      font-size: 24px;
      bottom: 20px;
      right: 20px;
    }
  }
</style>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const chatButton = document.getElementById('chatButton');
    const chatModal = document.getElementById('chatModal');
    
    chatButton.addEventListener('click', (e) => {
      e.stopPropagation();
      chatModal.style.display = chatModal.style.display === 'block' ? 'none' : 'block';
      if (chatModal.style.display === 'block') {
        chatModal.style.animation = 'fadeIn 0.3s ease';
      }
    });

    // ç‚¹å‡»å¼¹çª—å¤–éƒ¨å…³é—­
    document.addEventListener('click', (e) => {
      if (!chatModal.contains(e.target) && e.target !== chatButton) {
        chatModal.style.display = 'none';
      }
    });
  });
</script>
